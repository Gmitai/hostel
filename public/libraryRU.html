<!DOCTYPE html> <!-- Объявляет тип документа как HTML5 -->
<html lang="ru"> <!-- Открывающий тег HTML с указанием языка (русский) -->
<head> <!-- Секция head содержит метаданные страницы, не видимые пользователю -->
    <!-- Устанавливает кодировку символов UTF-8 для корректного отображения русского текста -->
    <meta charset="UTF-8">
    <!-- Настройка адаптивности для мобильных устройств -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Заголовок страницы, отображается во вкладке браузера -->
    <title>Научная библиотека Горно-металлургического институт Таджикистана</title>
    <!-- Подключение CSS-фреймворка Tailwind для стилизации -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Внутренние стили CSS -->
    <style>
        /* Устанавливает правильную модель блока для всех элементов */
        body {
            box-sizing: border-box;
        }
        /* Анимация плавного появления элементов */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        /* Определение анимации появления */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); } /* Начальное состояние: прозрачный и смещенный вниз */
            to { opacity: 1; transform: translateY(0); } /* Конечное состояние: видимый и на месте */
        }
        /* Эффект поднятия при наведении мыши */
        .hover-lift {
            transition: transform 0.2s ease, box-shadow 0.2s ease; /* Плавный переход */
        }
        .hover-lift:hover {
            transform: translateY(-2px); /* Поднимает элемент на 2px */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); /* Добавляет тень */
        }
    </style>
</head>
<!-- Основное тело страницы с градиентным фоном и минимальной высотой экрана -->
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Верхняя панель навигации (шапка сайта) -->
    <header class="bg-white shadow-lg border-b-4 border-blue-600">
        <!-- Контейнер с ограниченной шириной и центрированием -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <!-- Флекс-контейнер для размещения элементов по краям -->
            <div class="flex items-center justify-between">
                <!-- Левая часть: логотип и название -->
                <div class="flex items-center space-x-3">
                    <!-- Иконка-логотип в синем квадрате -->
                    <div class="bg-blue-600 p-3 rounded-lg">
                        <!-- SVG иконка книги -->
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                        </svg>
                    </div>
                    <!-- Текстовая часть логотипа -->
                    <div>
                        <!-- Главный заголовок сайта -->
                        <h1 class="text-2xl font-bold text-gray-800">Научная библиотека Горно-металлургического института Таджикистана</h1>
                        <!-- Подзаголовок с описанием -->
                        <p class="text-gray-600">Институт научных исследований</p>
                    </div>
                </div>
                
                <!-- Правая часть: меню пользователя -->
                <div id="userMenu" class="flex items-center space-x-4">
                    <!-- Меню для авторизованного пользователя (скрыто по умолчанию) -->
                    <div id="loggedInMenu" class="hidden flex items-center space-x-4">
                        <!-- Кнопка добавления новой статьи -->
                        <button onclick="showAddForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors flex items-center space-x-2">
                            <!-- Иконка плюса -->
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                            </svg>
                            <span>Добавить статью</span>
                        </button>
                        <!-- Выпадающее меню пользователя -->
                        <div class="relative">
                            <!-- Кнопка профиля пользователя -->
                            <button onclick="toggleUserDropdown()" class="flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors">
                                <!-- Аватар пользователя -->
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <!-- Иконка пользователя -->
                                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                    </svg>
                                </div>
                                <!-- Имя пользователя (заполняется JavaScript) -->
                                <span id="currentUserName" class="font-medium"></span>
                                <!-- Стрелка вниз -->
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <!-- Выпадающий список (скрыт по умолчанию) -->
                            <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50">
                                <!-- Ссылка на страницу профиля -->
                                <button onclick="showProfile()" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-t-lg transition-colors">
                                    Моя страница
                                </button>
                                <!-- Ссылка на статьи пользователя -->
                                <button onclick="showMyArticles()" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors">
                                    Мои статьи
                                </button>
                                <!-- Разделительная линия -->
                                <hr class="border-gray-200">
                                <!-- Кнопка выхода -->
                                <button onclick="logout()" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 rounded-b-lg transition-colors">
                                    Выйти
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Меню для неавторизованного пользователя -->
                    <div id="loggedOutMenu" class="flex items-center space-x-3">
                        <!-- Кнопка входа -->
                        <button onclick="showLoginForm()" class="text-gray-700 hover:text-blue-600 px-4 py-2 rounded-lg font-medium transition-colors">
                            Войти
                        </button>
                        <!-- Кнопка регистрации -->
                        <button onclick="showRegisterForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                            Регистрация
                        </button>
                    </div>
                </div>
				<a href="libraryRU.html">
					<img src="ru1.png" height="64" width="64" alt="Фото" style="cursor: pointer;">
				</a>
				
				<a href="libraryENG.html">
					<img src="eng1.png" height="64" width="64" alt="Фото" style="cursor: pointer;">
				</a>
				
				<a href="libraryTJ.html">
					<img src="tj1.png" height="64" width="64" alt="Фото" style="cursor: pointer;">
				</a>
            </div>
        </div>
    </header> <!-- Закрывающий тег шапки сайта -->

    <!-- Основной контейнер страницы -->
    <div class="max-w-7xl mx-auto px-4 py-8">
        <!-- Панель поиска и фильтрации -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <!-- Флекс-контейнер для адаптивного размещения элементов -->
            <div class="flex flex-col md:flex-row gap-4">
                <!-- Поле поиска (занимает всю доступную ширину) -->
                <div class="flex-1">
                    <!-- Текстовое поле для поиска с обработчиком ввода -->
                    <input type="text" id="searchInput" placeholder="Поиск по названию, автору или ключевым словам..." 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           oninput="filterArticles()">
                </div>
                <!-- Выпадающий список для фильтрации по категориям -->
                <select id="categoryFilter" onchange="filterArticles()" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    <option value="">Все категории</option>
                    <option value="Математика">Математика</option>
                    <option value="Физика">Физика</option>
                    <option value="Химия">Химия</option>
                    <option value="Биология">Биология</option>
                    <option value="Информатика">Информатика</option>
					<option value="Информатика">Искуственный интелект</option>
						<option value="Информатика">Энергетика</option>
						<option value="Информатика">Медицина</option>
						<option value="Информатика">Педагогика</option>
						<option value="Информатика">Сиёсатшиноси</option>
						<option value="Информатика">Право</option>
						<option value="Информатика">География</option>	
                    <option value="Другое">Другое</option>
                </select>
            </div>
        </div>

        <!-- Сетка для отображения статей -->
        <div id="articlesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Статьи будут добавлены сюда с помощью JavaScript -->
        </div>

        <!-- Состояние "пустой список" (показывается когда нет статей) -->
        <div id="emptyState" class="text-center py-16 hidden">
            <!-- Карточка с сообщением -->
            <div class="bg-white rounded-xl shadow-lg p-12">
                <!-- Большая иконка документа -->
                <svg class="w-24 h-24 text-gray-300 mx-auto mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                <!-- Заголовок сообщения -->
                <h3 class="text-xl font-semibold text-gray-600 mb-2">Пока нет статей</h3>
                <!-- Описание -->
                <p class="text-gray-500 mb-6">Станьте первым, кто добавит научную статью в библиотеку</p>
                <!-- Кнопка призыва к действию -->
                <button onclick="showAddForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    Добавить первую статью
                </button>
            </div>
        </div>
    </div> <!-- Закрывающий тег основного контейнера -->

    <!-- Модальное окно для добавления статьи -->
    <div id="addModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <!-- Контейнер модального окна -->
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Заголовок модального окна -->
            <div class="p-6 border-b border-gray-200">
                <!-- Флекс-контейнер для заголовка и кнопки закрытия -->
                <div class="flex items-center justify-between">
                    <!-- Заголовок -->
                    <h2 class="text-2xl font-bold text-gray-800">Добавить научную статью</h2>
                    <!-- Кнопка закрытия модального окна -->
                    <button onclick="hideAddForm()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <!-- Иконка крестика -->
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Форма для добавления новой статьи -->
            <form id="articleForm" class="p-6 space-y-6">
                <!-- Поле названия статьи -->
                <div>
                    <!-- Подпись к полю (обязательное поле отмечено звездочкой) -->
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Название статьи *</label>
                    <!-- Текстовое поле для ввода названия -->
                    <input type="text" id="title" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Введите название статьи">
                </div>
                
                <!-- Поле выбора категории -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Категория *</label>
                    <!-- Выпадающий список категорий -->
                    <select id="category" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="">Выберите категорию</option>
                        <option value="Математика">Математика</option>
                        <option value="Физика">Физика</option>
                        <option value="Химия">Химия</option>
                        <option value="Биология">Биология</option>
                        <option value="Информатика">Информатика</option>
						<option value="Информатика">Искуственный интелект</option>
						<option value="Информатика">Энергетика</option>
						<option value="Информатика">Медицина</option>
						<option value="Информатика">Педагогика</option>
						<option value="Информатика">Сиёсатшиноси</option>
						<option value="Информатика">Право</option>
						<option value="Информатика">География</option>	
                        <option value="Другое">Другое</option>
                    </select>
                </div>
                
                <!-- Поле аннотации -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Аннотация *</label>
                    <!-- Многострочное текстовое поле для описания статьи -->
                    <textarea id="abstract" required rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" placeholder="Краткое описание статьи..."></textarea>
                </div>
                
                <!-- Поле ключевых слов -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Ключевые слова</label>
                    <!-- Поле для ввода ключевых слов через запятую -->
                    <input type="text" id="keywords" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Через запятую: машинное обучение, алгоритмы, данные">
                </div>
                
                <!-- Поле журнала/конференции -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Журнал/Конференция</label>
                    <!-- Поле для названия издания -->
                    <input type="text" id="journal" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Название журнала или конференции">
                </div>
                
                <!-- Сетка для размещения полей в две колонки -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Поле года публикации -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Год публикации</label>
                        <!-- Числовое поле с ограничениями -->
                        <input type="number" id="year" min="1900" max="2024" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="2024">
                    </div>
                    <!-- Поле DOI -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">DOI</label>
                        <!-- Поле для цифрового идентификатора объекта -->
                        <input type="text" id="doi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="10.1000/182">
                    </div>
                </div>
                
                <!-- Панель с кнопками действий -->
                <div class="flex justify-end space-x-4 pt-4 border-t border-gray-200">
                    <!-- Кнопка отмены -->
                    <button type="button" onclick="hideAddForm()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold transition-colors">
                        Отмена
                    </button>
                    <!-- Кнопка отправки формы -->
                    <button type="submit" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors">
                        Добавить статью
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-800">Вход в систему</h2>
                    <button onclick="hideLoginForm()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <form id="loginForm" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Email</label>
                    <input type="email" id="loginEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="your@email.com">
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Пароль</label>
                    <input type="password" id="loginPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Введите пароль">
                </div>
                
                <div class="flex justify-between items-center pt-4">
                    <button type="button" onclick="showRegisterForm()" class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                        Нет аккаунта? Регистрация
                    </button>
                    <button type="submit" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors">
                        Войти
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-800">Регистрация</h2>
                    <button onclick="hideRegisterForm()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <form id="registerForm" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Полное имя *</label>
                    <input type="text" id="registerName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Иван Иванович Иванов">
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
                    <input type="email" id="registerEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="your@email.com">
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Кафедра</label>
                    <input type="text" id="registerDepartment" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Кафедра математики">
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Должность</label>
                    <select id="registerPosition" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="">Выберите должность</option>
                        <option value="Профессор">Профессор</option>
                        <option value="Доцент">Доцент</option>
                        <option value="Старший преподаватель">Старший преподаватель</option>
                        <option value="Преподаватель">Преподаватель</option>
                        <option value="Ассистент">Ассистент</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Пароль *</label>
                    <input type="password" id="registerPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Минимум 6 символов">
                </div>
                
                <div class="flex justify-between items-center pt-4">
                    <button type="button" onclick="showLoginForm()" class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                        Уже есть аккаунт? Войти
                    </button>
                    <button type="submit" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors">
                        Зарегистрироваться
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-800">Моя страница</h2>
                    <button onclick="hideProfile()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="profileContent" class="p-6">
                <!-- Profile content will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Article Detail Modal -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h2 id="detailTitle" class="text-2xl font-bold text-gray-800"></h2>
                    <button onclick="hideDetailModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="detailContent" class="p-6">
                <!-- Article details will be displayed here -->
            </div>
        </div>
    </div>

    <!-- JavaScript код для функциональности сайта -->
    <script>
        // Глобальные переменные для хранения данных
        // Загружаем статьи из локального хранилища браузера или создаем пустой массив
        let articles = JSON.parse(localStorage.getItem('articles')) || [];
        // Загружаем пользователей из локального хранилища или создаем пустой массив
        let users = JSON.parse(localStorage.getItem('users')) || [];
        // Загружаем текущего пользователя или устанавливаем null если никто не авторизован
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;

        // Функции для работы с авторизацией
        // Показать форму входа
        function showLoginForm() {
            hideRegisterForm(); // Скрываем форму регистрации если она открыта
            document.getElementById('loginModal').classList.remove('hidden'); // Показываем модальное окно входа
            document.body.style.overflow = 'hidden'; // Блокируем прокрутку страницы
        }

        // Скрыть форму входа
        function hideLoginForm() {
            document.getElementById('loginModal').classList.add('hidden'); // Скрываем модальное окно
            document.body.style.overflow = 'auto'; // Разблокируем прокрутку страницы
            document.getElementById('loginForm').reset(); // Очищаем поля формы
        }

        // Показать форму регистрации
        function showRegisterForm() {
            hideLoginForm(); // Скрываем форму входа если она открыта
            document.getElementById('registerModal').classList.remove('hidden'); // Показываем модальное окно регистрации
            document.body.style.overflow = 'hidden'; // Блокируем прокрутку страницы
        }

        // Скрыть форму регистрации
        function hideRegisterForm() {
            document.getElementById('registerModal').classList.add('hidden'); // Скрываем модальное окно
            document.body.style.overflow = 'auto'; // Разблокируем прокрутку страницы
            document.getElementById('registerForm').reset(); // Очищаем поля формы
        }

        // Переключить видимость выпадающего меню пользователя
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown'); // Получаем элемент выпадающего меню
            dropdown.classList.toggle('hidden'); // Переключаем класс 'hidden' (показать/скрыть)
        }

        function showProfile() {
            if (!currentUser) return;
            
            const userArticles = articles.filter(article => article.authorId === currentUser.id);
            
            const profileContent = `
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6">
                        <div class="flex items-center space-x-4">
                            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center">
                                <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">${currentUser.name}</h3>
                                <p class="text-gray-600">${currentUser.email}</p>
                                ${currentUser.position ? `<p class="text-sm text-gray-500">${currentUser.position}</p>` : ''}
                                ${currentUser.department ? `<p class="text-sm text-gray-500">${currentUser.department}</p>` : ''}
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white border border-gray-200 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-blue-600">${userArticles.length}</div>
                            <div class="text-sm text-gray-600">Опубликованных статей</div>
                        </div>
                        <div class="bg-white border border-gray-200 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-green-600">${new Date().getFullYear() - new Date(currentUser.registeredAt).getFullYear()}</div>
                            <div class="text-sm text-gray-600">Лет в системе</div>
                        </div>
                        <div class="bg-white border border-gray-200 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-purple-600">${userArticles.reduce((sum, article) => sum + (article.keywords ? article.keywords.split(',').length : 0), 0)}</div>
                            <div class="text-sm text-gray-600">Ключевых слов</div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Мои последние статьи</h4>
                        ${userArticles.length > 0 ? `
                            <div class="space-y-3">
                                ${userArticles.slice(0, 3).map(article => `
                                    <div class="bg-gray-50 rounded-lg p-4">
                                        <h5 class="font-medium text-gray-800 mb-1">${article.title}</h5>
                                        <p class="text-sm text-gray-600 mb-2">${article.abstract.substring(0, 100)}...</p>
                                        <div class="flex items-center justify-between text-xs text-gray-500">
                                            <span>${article.category}</span>
                                            <span>${new Date(article.dateAdded).toLocaleDateString('ru-RU')}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : '<p class="text-gray-500 text-center py-8">Пока нет опубликованных статей</p>'}
                    </div>
                </div>
            `;
            
            document.getElementById('profileContent').innerHTML = profileContent;
            document.getElementById('profileModal').classList.remove('hidden');
            document.getElementById('userDropdown').classList.add('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideProfile() {
            document.getElementById('profileModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function showMyArticles() {
            if (!currentUser) return;
            
            const userArticles = articles.filter(article => article.authorId === currentUser.id);
            document.getElementById('searchInput').value = '';
            document.getElementById('categoryFilter').value = '';
            displayArticles(userArticles);
            document.getElementById('userDropdown').classList.add('hidden');
        }

        // Функция входа в систему
        function login(email, password) {
            // Ищем пользователя с указанным email и паролем
            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                // Если пользователь найден, сохраняем его как текущего
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser)); // Сохраняем в локальное хранилище
                updateAuthUI(); // Обновляем интерфейс
                return true; // Успешный вход
            }
            return false; // Неверные данные
        }

        // Функция регистрации нового пользователя
        function register(userData) {
            // Проверяем, не существует ли уже пользователь с таким email
            if (users.find(u => u.email === userData.email)) {
                return false; // Email уже занят
            }
            
            // Создаем нового пользователя
            const newUser = {
                id: Date.now().toString(), // Уникальный ID на основе времени
                ...userData, // Копируем все данные пользователя
                registeredAt: new Date().toISOString() // Добавляем дату регистрации
            };
            
            // Добавляем пользователя в массив и сохраняем
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            // Автоматически входим в систему после регистрации
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateAuthUI(); // Обновляем интерфейс
            return true; // Успешная регистрация
        }

        // Функция выхода из системы
        function logout() {
            currentUser = null; // Очищаем текущего пользователя
            localStorage.removeItem('currentUser'); // Удаляем из локального хранилища
            updateAuthUI(); // Обновляем интерфейс
            document.getElementById('userDropdown').classList.add('hidden'); // Скрываем выпадающее меню
            
            // Сбрасываем фильтры и показываем все статьи
            document.getElementById('searchInput').value = '';
            document.getElementById('categoryFilter').value = '';
            displayArticles();
        }

        // Функция обновления интерфейса в зависимости от статуса авторизации
        function updateAuthUI() {
            // Получаем элементы меню для авторизованных и неавторизованных пользователей
            const loggedInMenu = document.getElementById('loggedInMenu');
            const loggedOutMenu = document.getElementById('loggedOutMenu');
            const currentUserName = document.getElementById('currentUserName');
            
            if (currentUser) {
                // Если пользователь авторизован - показываем меню для авторизованных
                loggedInMenu.classList.remove('hidden');
                loggedOutMenu.classList.add('hidden');
                currentUserName.textContent = currentUser.name; // Отображаем имя пользователя
            } else {
                // Если пользователь не авторизован - показываем меню для неавторизованных
                loggedInMenu.classList.add('hidden');
                loggedOutMenu.classList.remove('hidden');
            }
        }

        // Form handlers
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (login(email, password)) {
                hideLoginForm();
                showSuccessMessage('Добро пожаловать!');
            } else {
                showErrorMessage('Неверный email или пароль');
            }
        });

        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const password = document.getElementById('registerPassword').value;
            if (password.length < 6) {
                showErrorMessage('Пароль должен содержать минимум 6 символов');
                return;
            }
            
            const userData = {
                name: document.getElementById('registerName').value,
                email: document.getElementById('registerEmail').value,
                department: document.getElementById('registerDepartment').value,
                position: document.getElementById('registerPosition').value,
                password: password
            };
            
            if (register(userData)) {
                hideRegisterForm();
                showSuccessMessage('Регистрация успешна! Добро пожаловать!');
            } else {
                showErrorMessage('Пользователь с таким email уже существует');
            }
        });

        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in';
            successDiv.textContent = message;
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }

        function showErrorMessage(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in';
            errorDiv.textContent = message;
            document.body.appendChild(errorDiv);
            
            setTimeout(() => {
                errorDiv.remove();
            }, 3000);
        }

        function showAddForm() {
            if (!currentUser) {
                showErrorMessage('Войдите в систему для добавления статей');
                return;
            }
            document.getElementById('addModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideAddForm() {
            document.getElementById('addModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            document.getElementById('articleForm').reset();
        }

        function showDetailModal(index) {
            const article = articles[index];
            document.getElementById('detailTitle').textContent = article.title;
            
            const content = `
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-4">
                        <div class="flex items-center space-x-3 mb-2">
                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800">${article.author}</h4>
                                <div class="flex flex-wrap gap-2 text-sm text-gray-600">
                                    ${article.authorPosition ? `<span>${article.authorPosition}</span>` : ''}
                                    ${article.authorDepartment ? `<span>• ${article.authorDepartment}</span>` : ''}
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-wrap gap-4 text-sm text-gray-600">
                            <span class="flex items-center">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                </svg>
                                ${article.category}
                            </span>
                            ${article.year ? `<span class="flex items-center">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                ${article.year}
                            </span>` : ''}
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">Аннотация</h3>
                        <p class="text-gray-700 leading-relaxed">${article.abstract}</p>
                    </div>
                    
                    ${article.keywords ? `
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">Ключевые слова</h3>
                        <div class="flex flex-wrap gap-2">
                            ${article.keywords.split(',').map(keyword => 
                                `<span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">${keyword.trim()}</span>`
                            ).join('')}
                        </div>
                    </div>
                    ` : ''}
                    
                    ${article.journal ? `
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Журнал/Конференция</h3>
                        <p class="text-gray-700">${article.journal}</p>
                    </div>
                    ` : ''}
                    
                    ${article.doi ? `
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">DOI</h3>
                        <p class="text-blue-600 font-mono">${article.doi}</p>
                    </div>
                    ` : ''}
                    
                    <div class="text-sm text-gray-500 pt-4 border-t border-gray-200">
                        Добавлено: ${new Date(article.dateAdded).toLocaleDateString('ru-RU')}
                    </div>
                </div>
            `;
            
            document.getElementById('detailContent').innerHTML = content;
            document.getElementById('detailModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideDetailModal() {
            document.getElementById('detailModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function deleteArticle(index) {
            if (confirm('Вы уверены, что хотите удалить эту статью?')) {
                articles.splice(index, 1);
                localStorage.setItem('articles', JSON.stringify(articles));
                displayArticles();
            }
        }

        document.getElementById('articleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!currentUser) {
                showErrorMessage('Войдите в систему для добавления статей');
                return;
            }
            
            const article = {
                id: Date.now().toString(),
                title: document.getElementById('title').value,
                author: currentUser.name,
                authorId: currentUser.id,
                authorEmail: currentUser.email,
                authorDepartment: currentUser.department || '',
                authorPosition: currentUser.position || '',
                category: document.getElementById('category').value,
                abstract: document.getElementById('abstract').value,
                keywords: document.getElementById('keywords').value,
                journal: document.getElementById('journal').value,
                year: document.getElementById('year').value,
                doi: document.getElementById('doi').value,
                dateAdded: new Date().toISOString()
            };
            
            articles.unshift(article);
            localStorage.setItem('articles', JSON.stringify(articles));
            
            hideAddForm();
            displayArticles();
            showSuccessMessage('Статья успешно добавлена!');
        });

        function displayArticles(articlesToShow = articles) {
            const grid = document.getElementById('articlesGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (articlesToShow.length === 0) {
                grid.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            grid.innerHTML = articlesToShow.map((article, index) => `
                <div class="bg-white rounded-xl shadow-lg hover-lift fade-in cursor-pointer" onclick="showDetailModal(${articles.indexOf(article)})">
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">${article.category}</span>
                            <button onclick="event.stopPropagation(); deleteArticle(${articles.indexOf(article)})" class="text-gray-400 hover:text-red-500 transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                        
                        <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">${article.title}</h3>
                        
                        <div class="flex items-center text-sm text-gray-600 mb-3">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            ${article.author}
                            ${article.authorPosition ? ` • ${article.authorPosition}` : ''}
                            ${article.year ? ` • ${article.year}` : ''}
                        </div>
                        
                        <p class="text-gray-700 text-sm mb-4 line-clamp-3">${article.abstract}</p>
                        
                        ${article.keywords ? `
                        <div class="flex flex-wrap gap-1 mb-4">
                            ${article.keywords.split(',').slice(0, 3).map(keyword => 
                                `<span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs">${keyword.trim()}</span>`
                            ).join('')}
                            ${article.keywords.split(',').length > 3 ? '<span class="text-gray-400 text-xs">...</span>' : ''}
                        </div>
                        ` : ''}
                        
                        <div class="flex items-center justify-between text-xs text-gray-500">
                            <span>${new Date(article.dateAdded).toLocaleDateString('ru-RU')}</span>
                            <span class="text-blue-600 font-medium">Подробнее →</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterArticles() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            
            const filtered = articles.filter(article => {
                const matchesSearch = !searchTerm || 
                    article.title.toLowerCase().includes(searchTerm) ||
                    article.author.toLowerCase().includes(searchTerm) ||
                    article.abstract.toLowerCase().includes(searchTerm) ||
                    (article.keywords && article.keywords.toLowerCase().includes(searchTerm));
                
                const matchesCategory = !categoryFilter || article.category === categoryFilter;
                
                return matchesSearch && matchesCategory;
            });
            
            displayArticles(filtered);
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            const userDropdown = document.getElementById('userDropdown');
            const userButton = event.target.closest('[onclick="toggleUserDropdown()"]');
            
            if (!userButton && !userDropdown.contains(event.target)) {
                userDropdown.classList.add('hidden');
            }
        });

        // Инициализация страницы при загрузке
        updateAuthUI(); // Обновляем интерфейс авторизации
        displayArticles(); // Отображаем все статьи
    </script> <!-- Закрывающий тег JavaScript -->
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9853bdc8b0a7f102',t:'MTc1ODg5OTk4NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body> <!-- Закрывающий тег body -->
</html> <!-- Закрывающий тег HTML документа -->
